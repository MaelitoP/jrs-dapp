"use strict";var e=require("@web3-react/abstract-connector");function n(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n)}function t(e){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,n){return(r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,n,t){return(c=o()?Reflect.construct:function(e,n,t){var o=[null];o.push.apply(o,n);var c=new(Function.bind.apply(e,o));return t&&r(c,t.prototype),c}).apply(null,arguments)}function i(e){var n="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,o)}function o(){return c(e,arguments,t(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),r(o,e)})(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e){function t(){var n;return(n=e.call(this)||this).name=n.constructor.name,n.message="The user rejected the request.",n}return n(t,e),t}(i(Error)),s=function(e){function t(n){var t,r,o,c;return(t=e.call(this,{supportedChainIds:(r=n,o=r.supportedChainIds,c=r.rpc,o||(c?Object.keys(c).map((function(e){return Number(e)})):void 0))})||this).config=n,t.handleChainChanged=t.handleChainChanged.bind(a(t)),t.handleAccountsChanged=t.handleAccountsChanged.bind(a(t)),t.handleDisconnect=t.handleDisconnect.bind(a(t)),t}n(t,e);var r=t.prototype;return r.handleChainChanged=function(e){this.emitUpdate({chainId:e})},r.handleAccountsChanged=function(e){this.emitUpdate({account:e[0]})},r.handleDisconnect=function(){this.walletConnectProvider&&(this.walletConnectProvider.removeListener("chainChanged",this.handleChainChanged),this.walletConnectProvider.removeListener("accountsChanged",this.handleAccountsChanged),this.walletConnectProvider=void 0),this.emitDeactivate()},r.activate=function(){try{var e=this,n=function(){function n(){var n;return Promise.resolve(new Promise((function(t,r){var o=function(){e.walletConnectProvider=void 0,r(new u)};e.walletConnectProvider.connector.on("disconnect",(function(){n||o()})),e.walletConnectProvider.enable().then((function(e){return t(e[0])})).catch((function(e){"User closed modal"!==e.message?r(e):o()}))})).catch((function(e){throw e}))).then((function(t){return n=t,e.walletConnectProvider.on("disconnect",e.handleDisconnect),e.walletConnectProvider.on("chainChanged",e.handleChainChanged),e.walletConnectProvider.on("accountsChanged",e.handleAccountsChanged),{provider:e.walletConnectProvider,account:n}}))}var t=function(){if(!e.walletConnectProvider.connector.connected)return Promise.resolve(e.walletConnectProvider.connector.createSession(e.config.chainId?{chainId:e.config.chainId}:void 0)).then((function(){e.emit("URI_AVAILABLE",e.walletConnectProvider.connector.uri)}))}();return t&&t.then?t.then(n):n()},t=function(){if(!e.walletConnectProvider)return Promise.resolve(new Promise((function(e){e(function(e){if(e&&e.__esModule)return e;var n={};return e&&Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n.default=e,n}(require("@walletconnect/ethereum-provider")))})).then((function(e){var n;return null!=(n=null==e?void 0:e.default)?n:e}))).then((function(n){e.walletConnectProvider=new n(e.config)}))}();return Promise.resolve(t&&t.then?t.then(n):n())}catch(e){return Promise.reject(e)}},r.getProvider=function(){try{return Promise.resolve(this.walletConnectProvider)}catch(e){return Promise.reject(e)}},r.getChainId=function(){try{return Promise.resolve(this.walletConnectProvider.chainId)}catch(e){return Promise.reject(e)}},r.getAccount=function(){try{return Promise.resolve(this.walletConnectProvider.accounts).then((function(e){return e[0]}))}catch(e){return Promise.reject(e)}},r.deactivate=function(){this.walletConnectProvider&&(this.walletConnectProvider.removeListener("disconnect",this.handleDisconnect),this.walletConnectProvider.removeListener("chainChanged",this.handleChainChanged),this.walletConnectProvider.removeListener("accountsChanged",this.handleAccountsChanged),this.walletConnectProvider.disconnect())},r.close=function(){try{return this.emitDeactivate(),Promise.resolve()}catch(e){return Promise.reject(e)}},t}(e.AbstractConnector);exports.URI_AVAILABLE="URI_AVAILABLE",exports.UserRejectedRequestError=u,exports.WalletConnectConnector=s;
//# sourceMappingURL=walletconnect-connector.cjs.production.min.js.map
